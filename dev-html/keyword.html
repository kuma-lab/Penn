<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" type="text/css" href="../slick/slick.css"/>
    <link rel="stylesheet" href="../dev-css/keyword.css" />
    <link rel="stylesheet" href="../assets/css/keyword.css" />
    <title>keyword Page</title>
  </head>
  <body>
    <!-- Header site -->
    <header class="headerSite">
      <a href="home.html" class="linkToHome">
        <img class="logo" src="../img/logo.png" alt="">
      </a>
      <div class="searchContainer">
          <img src="../img/Search.png" alt="search" class="searchIcon">
          <label class="labelSearch" for="gsearch"></label>
          <input type="search" class="searchInput" id="gsearch" placeholder="search people" name="gsearch">
      </div>
      <div class="imgContainer notification">
        <img src="../img/Notification 1.png" alt="notification" class="notificationIcon">
      </div>
      <div class="imgContainer avatar">
        <img src="../img/avatar2.png" alt="avatar" class="avatarImage">
      </div>
    </header>
  <main>

    <article  class="main">
      <h2 class="pageTitle">Keyword : Social Cognition</h2>
      <section class="timeline keywordsTimeLine">
        <div class="arrow left timeContainerArrowPrev">
            <img src="../img/slider-arrow.png" alt="arrow">
        </div>
        <div class="timeContainer"> 
            <!-- Completed by JS -->
        </div>
        <div class="arrow right timeContainerArrowNext"> 
            <img src="../img/slider-arrow.png" alt="arrow">
        </div>
      </section>

    <div class="listArticlesByYears flexContainer">
      <section class="mediaContainer" data-content-year="2021">
          <p class="year">2021</p>
          <ul>
            <li class="press">first publications</li>
            <li class="talk">second publications</li>
            <li class="papers">third publications</li>
            <li class="press">fourth publications</li>
            <li class="press">fifth publications</li>
          </ul>
      </section>
      <section class="mediaContainer" data-content-year="2020">
        <p class="year">2020</p>
        <ul>
          <li class="press">first publications</li>
          <li class="talk">second publications</li>
          <li class="papers">third publications</li>
        </ul>
      </section>
      <section class="mediaContainer" data-content-year="2019">
        <p class="year">2019</p>
        <ul>
          <li class="press">first publications</li>
          <li class="talk">second publications</li>
          <li class="papers">third publications</li>
          <li class="press">fourth publications</li>
          <li class="press">fifth publications</li>
          <li class="talk">sixth publications</li>
          <li class="talk">seventh publications</li>
          <li class="papers">eighth publications</li>
        </ul>
      </section>
      <section class="mediaContainer" data-content-year="2018">
        <p class="year">2018</p>
        <ul>
          <li class="press">first publications</li>
          <li class="talk">second publications</li>
          <li class="papers">third publications</li>
          <li class="press">fourth publications</li>
          <li class="press">fifth publications</li>
          <li class="talk">sixth publications</li>
          <li class="talk">seventh publications</li>
        </ul>
      </section>
      <section class="mediaContainer" data-content-year="2017">
        <p class="year">2017</p>
        <ul>
          <li class="press">first publications</li>
          <li class="talk">second publications</li>
          <li class="papers">third publications</li>
          <li class="press">fourth publications</li>
        </ul>
      </section>
      <section class="mediaContainer" data-content-year="2016">
        <p class="year">2016</p>
        <ul>
          <li class="press">first publications</li>
          <li class="talk">second publications</li>
          <li class="papers">third publications</li>
          <li class="press">fourth publications</li>
          <li class="press">fifth publications</li>
        </ul>
      </section>
      <section class="mediaContainer" data-content-year="2015">
        <p class="year">2015</p>
        <ul>
          <li class="press">first publications</li>
          <li class="talk">second publications</li>
          <li class="papers">third publications</li>
        </ul>
      </section>
      <section class="mediaContainer" data-content-year="2014">
        <p class="year">2014</p>
        <ul>
          <li class="press">first publications</li>
          <li class="talk">second publications</li>
          <li class="papers">third publications</li>
          <li class="press">fourth publications</li>
          <li class="press">fifth publications</li>
          <li class="talk">sixth publications</li>
          <li class="talk">seventh publications</li>
          <li class="papers">eighth publications</li>
        </ul>
      </section>
      <section class="mediaContainer" data-content-year="2013">
        <p class="year">2013</p>
        <ul>
          <li class="press">first publications</li>
          <li class="talk">second publications</li>
          <li class="papers">third publications</li>
          <li class="press">fourth publications</li>
          <li class="press">fifth publications</li>
          <li class="talk">sixth publications</li>
          <li class="talk">seventh publications</li>
        </ul>
      </section>
      <section class="mediaContainer" data-content-year="2012">
        <p class="year">2012</p>
        <ul>
          <li class="press">first publications</li>
          <li class="talk">second publications</li>
          <li class="press">fourth publications</li>
        </ul>
      </section>
      <section class="mediaContainer" data-content-year="2011">
        <p class="year">2011</p>
        <ul>
          <li class="press">first publications</li>
          <li class="talk">second publications</li>
          <li class="papers">third publications</li>
          <li class="press">fourth publications</li>
          <li class="press">fifth publications</li>
        </ul>
      </section>
    </div>
    </article>

    <article class="side">
      <section class="chatContainer">
        <h2>My Peers <span class="viewAll">view all</span></h2>
        <div class="messageContainer">
          <div class="avatarContainer">
            <img class="avatar" src="../img/avatar1.png" alt="avatar">
          </div>
            <div class="txtInfos">
              <h4>Annie Patel</h4>
              <p><span>Main field: </span>Computer Science</p>
            </div>
            <span class="time"> 15m ago</span>
        </div>
        <div class="messageContainer">
          <div class="avatarContainer">
            <img class="avatar" src="../img/avatar12.jpg" alt="avatar">
          </div>
            <div class="txtInfos">
              <h4>Annie Patel</h4>
              <p><span>Main field: </span>Computer Science</p>
            </div>
            <span class="time"> 15m ago</span>
        </div>
        <div class="messageContainer">
          <div class="avatarContainer">
            <img class="avatar" src="../img/avatar6.png" alt="avatar">
          </div>
            <div class="txtInfos">
              <h4>Annie Patel</h4>
              <p><span>Main field: </span>Computer Science</p>
            </div>
            <span class="time"> 15m ago</span>
        </div>
        <div class="messageContainer">
          <div class="avatarContainer">
            <img class="avatar" src="../img/avatar7.png" alt="avatar">
          </div>
            <div class="txtInfos">
              <h4>Annie Patel</h4>
              <p><span>Main field: </span>Computer Science</p>
            </div>
            <span class="time"> 15m ago</span>
        </div>
        <div class="messageContainer">
          <div class="avatarContainer">
            <img class="avatar" src="../img/avatar8.png" alt="avatar">
          </div>
            <div class="txtInfos">
              <h4>Annie Patel</h4>
              <p><span>Main field: </span>Computer Science</p>
            </div>
            <span class="time"> 15m ago</span>
        </div>

    </section>
    <section class="chatContainer potentialConnection">
      <h2>Potential Connections <span class="viewAll">view all</span></h2>
      <div class="messageContainer">
        <div class="avatarContainer">
          <img class="avatar" src="../img/avatar2.png" alt="avatar">
        </div>
        <h4>Aysha Murillo</h4>
        <a href="#" class="follow"><img src="../img/follow.png" alt="">Follow</a>
      </div>
      <div class="messageContainer">
        <div class="avatarContainer">
          <img class="avatar" src="../img/avatar3.png" alt="avatar">
        </div>
        <h4>Aysha Murillo</h4>
        <a href="#" class="follow"><img src="../img/follow.png" alt="">Follow</a>
      </div>
      <div class="messageContainer">
        <div class="avatarContainer">
          <img class="avatar" src="../img/avatar4.png" alt="avatar">
        </div>
        <h4>Aysha Murillo</h4>
        <a href="#" class="follow"><img src="../img/follow.png" alt="">Follow</a>
      </div>
  </section>
    </article>
  </main>

  <script type="text/javascript" src="../slick/jquery-1.11.0.min.js"></script>
  <script type="text/javascript" src="../slick/jquery-migrate-1.2.1.min.js"></script>
	<script type="text/javascript" src="../slick/slick.js"></script>
  <script type="text/javascript" src="https://unpkg.com/masonry-layout@4/dist/masonry.pkgd.min.js"></script>
	
  <script type="text/javascript">

    /*********************************************************
    /* Create All animation to Scroll to the right year block
    **********************************************************/
    function scrollToElm(container, elm, duration){
      var pos = getRelativePos(elm);
      scrollTo( container, pos.top , duration);  // duration in seconds
    }

    function getRelativePos(elm){
      var pPos = elm.parentNode.getBoundingClientRect(), // parent pos
          cPos = elm.getBoundingClientRect(), // target pos
          pos = {};

      pos.top    = cPos.top    - pPos.top + elm.parentNode.scrollTop,
      pos.right  = cPos.right  - pPos.right,
      pos.bottom = cPos.bottom - pPos.bottom,
      pos.left   = cPos.left   - pPos.left;

      return pos;
    }
        
    function scrollTo(element, to, duration, onDone) {
        var start = element.scrollTop,
            change = to - start,
            startTime = performance.now(),
            val, now, elapsed, t;

        function animateScroll(){
            now = performance.now();
            elapsed = (now - startTime)/1000;
            t = (elapsed/duration);

            element.scrollTop = start + change * easeInOutQuad(t);

            if( t < 1 )
                window.requestAnimationFrame(animateScroll);
            else
                onDone && onDone();
        };

        animateScroll();
    }

    function easeInOutQuad(t){ return t<.5 ? 2*t*t : -1+(4-2*t)*t };

    /**************************
    /* Create Sliders TimeLine
    ***************************/
    function initSlick() {
      // Create one date by block year with articles
      let timeLineDates = [];
      let allDates = document.querySelectorAll('.listArticlesByYears .year')
      for (let date of allDates) {
        timeLineDates.push(date.innerHTML)
      }
      // Keep unique dates
      let timeLineUniqueDates = [...new Set(timeLineDates)]
      // Sort desc value
      timeLineUniqueDates.sort((a, b) => b - a);

      // Insert dates on timeline
      const listDates = document.querySelector('.keywordsTimeLine .timeContainer');
      for (let date of timeLineUniqueDates) {
        listDates.innerHTML += '<div>' +  date + '</div>'
      }

      // Slider TimeLine
      $('.keywordsTimeLine .timeContainer').slick({
          infinite: false,
          slidesToShow: 1,
          slidesToScroll: 1,
          centerMode: true,
          variableWidth: true,
          rows: false,
          arrows: true,
          adaptiveHeight: true,
          focusOnSelect: true,
          transformEnabled: false,
          useTransform: false,
          prevArrow: $('.keywordsTimeLine .timeContainerArrowPrev'),
          nextArrow: $('.keywordsTimeLine .timeContainerArrowNext')
      });

      /****************************************************
      /*  Change index when user clic on an arrow timeline
      /****************************************************/
      $('.keywordsTimeLine .timeContainer').on('beforeChange', function(event, slick, currentSlide, nextSlide){
        let year = document.querySelectorAll('.keywordsTimeLine .timeContainer .slick-slide')[nextSlide].innerHTML
        // Find element to scroll and get it top position to scroll with this container
        const element = document.querySelector('.mediaContainer[data-content-year="' + year + '"]');
        const containerBlocksYears = document.getElementsByClassName('flexContainer')[0];
        scrollToElm( containerBlocksYears, element , .2 );
      });

      /****************************************
      /* Change index when user clic on a date
      *****************************************/
      const timeLineSlides = document.querySelectorAll('.slick-slide')
      for (let year of timeLineSlides) {
        year.addEventListener('click', function (e) {
          // Find year clicked on the timeline
          let indexRightYear = e.target.innerHTML;
          // Find element to scroll and get it top position to scroll with this container
          const element = document.querySelector('.mediaContainer[data-content-year="' + indexRightYear + '"]');
          const containerBlocksYears = document.getElementsByClassName('flexContainer')[0];
          scrollToElm( containerBlocksYears, element , .2 );
        })
      }

    }

    $(document).ready(function(){
      initSlick();

      // Masonry Grid to list blocks with varying heights
      $('.flexContainer').masonry({});
    });
  </script>
  </body>
</html>
